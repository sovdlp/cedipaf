{"version":3,"sources":["../../src/composables/items.ts"],"names":["computed","getPropertyFromItem","pick","propsFactory","makeItemsProps","items","type","Array","default","itemTitle","String","Function","itemValue","itemChildren","itemProps","Boolean","returnObject","transformItem","props","item","title","value","children","_props","isArray","transformItems","undefined","originalItem","array","push","useItems","transformIn","map","transformOut"],"mappings":"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","sourcesContent":["// Utilities\nimport { computed } from 'vue'\nimport { getPropertyFromItem, pick, propsFactory } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { SelectItemKey } from '@/util'\n\nexport interface InternalItem {\n  title: string\n  value: any\n  props: {\n    [key: string]: any\n    title: string\n    value: any\n  }\n  children?: InternalItem[]\n  originalItem: any\n}\n\nexport interface ItemProps {\n  items: any[]\n  itemTitle: SelectItemKey\n  itemValue: SelectItemKey\n  itemChildren: SelectItemKey\n  itemProps: SelectItemKey\n  returnObject: boolean\n}\n\n// Composables\nexport const makeItemsProps = propsFactory({\n  items: {\n    type: Array as PropType<ItemProps['items']>,\n    default: () => ([]),\n  },\n  itemTitle: {\n    type: [String, Array, Function] as PropType<SelectItemKey>,\n    default: 'title',\n  },\n  itemValue: {\n    type: [String, Array, Function] as PropType<SelectItemKey>,\n    default: 'value',\n  },\n  itemChildren: {\n    type: [String, Array, Function] as PropType<SelectItemKey>,\n    default: 'children',\n  },\n  itemProps: {\n    type: [Boolean, String, Array, Function] as PropType<SelectItemKey>,\n    default: 'props',\n  },\n  returnObject: Boolean,\n}, 'item')\n\nexport function transformItem (props: Omit<ItemProps, 'items'>, item: any) {\n  const title = getPropertyFromItem(item, props.itemTitle, item)\n  const value = getPropertyFromItem(item, props.itemValue, title)\n  const children = getPropertyFromItem(item, props.itemChildren)\n  const itemProps = props.itemProps === true ? pick(item, ['children'])[1] : getPropertyFromItem(item, props.itemProps)\n\n  const _props = {\n    title,\n    value,\n    ...itemProps,\n  }\n\n  return {\n    title: _props.title,\n    value: _props.value,\n    props: _props,\n    children: Array.isArray(children) ? transformItems(props, children) : undefined,\n    originalItem: item,\n  }\n}\n\nexport function transformItems (props: Omit<ItemProps, 'items'>, items: ItemProps['items']) {\n  const array: InternalItem[] = []\n\n  for (const item of items) {\n    array.push(transformItem(props, item))\n  }\n\n  return array\n}\n\nexport function useItems (props: ItemProps) {\n  const items = computed(() => transformItems(props, props.items))\n\n  function transformIn (value: any[]): InternalItem[] {\n    return value.map(item => transformItem(props, item))\n  }\n\n  function transformOut (value: InternalItem[]) {\n    if (props.returnObject) return value.map(({ originalItem: item }) => item)\n    return value.map(({ props }) => props.value)\n  }\n\n  return { items, transformIn, transformOut }\n}\n"],"file":"items.mjs"}